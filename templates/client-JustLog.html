<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<link rel = "icon" href = "static/favicon.ico" type = "image/x-icon" />
<style>
h1, h2, p, li, td, label {font-family: Verdana;}
body {font-size: 75%;}
ul {list-style-type: none;margin: 0;padding: 0;overflow: hidden;background-color: #600080;}
li {float: left;}
li a {display: inline-block;color: white;text-align: center;padding: 14px 16px;text-decoration: none;}
li a:hover {background-color: #111;}
.btn-link{border:none;outline:none;background:none;cursor:pointer;color:#0000EE;padding:0;text-decoration:underline;font-family:inherit;font-size:inherit;}
table, th, td {border: 1px solid black;border-collapse: collapse;padding: 5px;-webkit-column-width: 100%;-moz-column-width: 100%;column-width: 100%;}
</style>
<meta property="og:type" content="website" />
<meta property="og:title" content="Bismuth Tools Web" />
<meta property="og:description" content="Bismuth Cryptocurrency tools with block explorer, blockchain query, miner information and richlist" />
<meta property="og:url" content="http://bismuth.cz/" />
<meta property="og:site_name" content="Bismuth Tools" />
<meta property="og:image" content="https://i1.wp.com/bismuth.cz/wp-content/uploads/2017/03/cropped-mesh2-2.png" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:locale" content="en_US" />
<meta property="xbm:version" content="201" />
<meta name="description" content="Bismuth Cryptocurrency tools with block explorer, blockchain query, miner information and richlist" />
<title>Bismuth Tools Web v6.1.0</title>

<!-- Websocket -->
<script type="text/javascript">

// Config
var port = 9000;
var host = "ws://127.0.0.1:"+port; // No need to change this if using localhost
var consoleLogOnScreen = true; // If true shows the console.log in an HTML element

//Declare Variables
var socket;
var explodedValues = [0,0,0,0]; //initial value for the plot = 0


function init() {
	
	if (consoleLogOnScreen) {
	// Function to output console.log to html element (logs on screen)
	// From: http://stackoverflow.com/a/20256785/1709835
	(function () {
		if (!console) {
	        console = {};
	    }
	    var old = console.log;
	    var logger = document.getElementById('log');
	    console.log = function (message) {
	            logger.innerHTML += message + '<br />';
	    }
	})();
	}
	
	// Websocket!
	try {
		socket = new WebSocket(host);
		//console.log('WebSocket status '+socket.readyState);
		console.log('<b>Information:</b> Querying node....');
		socket.onopen    = function(msg) {
							   document.getElementById('status').innerHTML = '<h3 style="color:green;">Status: Connected</h3>';
							   //console.log("Welcome - status "+this.readyState); 
						   };
		socket.onmessage = function(msg) { 
							   document.getElementById('log').innerHTML = '';
							   console.log("<b>Information:</b> "+msg.data);
							
						   };
		socket.onclose   = function(msg) { 
							   document.getElementById('status').innerHTML = '<h3 style="color:red;">Status: Disconnected</h3>';
							   document.getElementById('log').innerHTML = '';
							   console.log("<b>Information:</b> Disconnected");
							   //console.log("Disconnected - status "+this.readyState); 
						   };
	}
	catch(ex){ 
		console.log(ex); 
	}
	
}

function quit(){
	if (socket != null) {
		console.log("Close Socket");
		socket.close();
		socket=null;
	}
}

function reconnect() {
	quit();
	init();
}

</script>

</head>

<body onload="init()" background="static/explorer_bg.png">

<center>
<table style="border:0">
<tr style="border:0"><td style="border:0">
<ul>
<li><a href="">Menu:</a></li>
<li><a href="/">Home</a></li>
<li><a href="/ledgerquery">Ledger Query</a></li>
<li><a href="/minerquery">Miner Stats</a></li>
<li><a href="/richest">Rich List</a></li>
<li><a href="/sponsorinfo">Sponsors</a></li>
<li><a href="/apihelp">API</a></li>
<li><a href="/charts">Charts</a></li>
<li><a href="/tools">Tools</a></li>
</ul>
</td></tr>
</table>

<h2>Realtime Bismuth Mempool</h2>
<h3>Local Mempool Data</h3>
<button onclick="reconnect()">Reconnect</button>
<div id="status"></div>

</center>

<div id="log"></div>

</body>
</html>